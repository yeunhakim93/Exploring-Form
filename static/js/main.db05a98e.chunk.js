(this.webpackJsonpformBuilder=this.webpackJsonpformBuilder||[]).push([[0],{35:function(e){e.exports=JSON.parse('[{"id":"9845612a","type":"checkbox","body":"<div>Is this a <strong>checkbox</strong>?</div>","color":"#f5cac3"},{"id":"9546841b","type":"shortAnswer","body":"<div>Is this a <strong>short answer</strong>?</div>","color":"#84a59d"},{"id":"7561238c","type":"container","body":"<div>This is a <strong>container</strong>!</div>","columns":[[{"id":"12358478d","type":"checkbox","body":"<div>Is this a <strong>checkbox</strong>?</div>","color":"#f5cac3"},{"id":"12387545e","type":"shortAnswer","body":"<div>Is this a <strong>short answer</strong>?</div>","color":"#f5cac3"}],[],[{"id":"68426545f","type":"checkbox","body":"<div>Is this a <strong>checkbox</strong>?</div>","color":"#f5cac3"}]]}]')},52:function(e,t,n){},54:function(e,t,n){"use strict";n.r(t);var r=n(0),i=n.n(r),a=n(21),d=n.n(a),o=n(23),c=n(19),l=n(9),s=n(6),p=n(20),u={brandId:"formteam",kind:"questionnaire",data:function(e){var t={};t.children=e.map((function(e){return e.id}));return function e(n){var r,i=n.data,a=n.parentId,d=n.idx,o=Object(p.a)(i);try{for(o.s();!(r=o.n()).done;){var c=r.value;if(t[c.id]={type:c.type,body:c.body},c.columns){for(var l=[],s=0;s<c.columns.length;s++){var u=c.columns[s];l.push(u.map((function(e){return e.id}))),e({data:u,parentId:c.id,idx:s})}t[c.id].children=l}a&&(t[c.id].parent={id:a},void 0!==d&&(t[c.id].parent.index=d))}}catch(b){o.e(b)}finally{o.f()}}({data:e}),t}(n(35))},b=Object(o.b)({name:"formBuilder",initialState:u,reducers:{addOrUpdateElement:function(e,t){e.data[t.payload.element.id]?function(e,t){var n=e.data[t.payload.element.id],r=Object(l.a)({},e.data[t.payload.element.id]);r.parent&&(r.parent=Object(l.a)({},r.parent));if(n.parent){var i=e.data[e.data[t.payload.element.id].parent.id].children[n.parent.index];e.data[e.data[t.payload.element.id].parent.id].children[n.parent.index]=i.filter((function(e){return e!==t.payload.element.id}))}else{var a=Object(s.a)(e.data.children).filter((function(e){return e!==t.payload.element.id}));e.data.children=a}y(e,t)}(e,t):y(e,t)},removeFormElement:function(e,t){g(e,t)},clearForm:function(e){return u},submitForm:function(e){return u}}}),f=function(e){return e.formBuilder.data},x=b.actions,h=x.removeFormElement,m=x.clearForm,j=x.submitForm,v=x.addOrUpdateElement;function y(e,t){var n=t.payload,r=n.element,i=n.parentId,a=n.index,d=n.prevId;if(i){var o=[];if(e.data[i].children&&void 0!==a&&(o=Object(s.a)(e.data[i].children[a])),void 0!==a){if(d){var c=o.indexOf(d);c===o.length?e.data[i].children[a].push(r.id):o.splice(c+1,0,r.id)}else o.unshift(r.id);if(e.data[i].children)e.data[i].children[a]=o;else{var l=new Array(3).fill([]);l[a]=[r.id],e.data[i].children=l}}}else if(e.data.children)if(d){var p=Object(s.a)(e.data.children);p.splice(p.indexOf(d)+1,0,r.id),e.data.children=p}else e.data.children=[r.id].concat(Object(s.a)(e.data.children));else e.data.children=[r.id];var u={type:r.type,body:r.body};i&&(u.parent={id:i}),void 0!==a&&(u.parent.index=a),e.data[r.id]=u}function g(e,t){if(e.data[t.payload.id]){var n=Object(l.a)({},e.data[t.payload.id]);if(n.parent&&(n.parent=Object(l.a)({},e.data[t.payload.id].parent)),e.data[t.payload.id].parent){var r=e.data[t.payload.id].parent,i=r.id,a=r.index,d=Object(s.a)(e.data[i].children[a]).filter((function(e){return e!==t.payload.id}));e.data[i].children[a]=d}else{var o=Object(s.a)(e.data.children).filter((function(e){return e!==t.payload.id}));e.data.children=o}if(e.data[t.payload.id].children){var c,u=Object(p.a)(e.data[t.payload.id].children);try{for(u.s();!(c=u.n()).done;){var b,f=c.value,x=Object(p.a)(f);try{for(x.s();!(b=x.n()).done;){g(e,{payload:{id:b.value}})}}catch(h){x.e(h)}finally{x.f()}}}catch(h){u.e(h)}finally{u.f()}}delete e.data[t.payload.id]}}var O=function(){var e=E(f),t=w(),n=function(e){var n=e.formElement,r=e.parentId,i=e.index,a=e.prevId;t(v({element:n,parentId:r,index:i,prevId:a}))},i=function(e){var n=e.formElementId;return t(h({id:n}))},a=function(){return t(m())},d=function(){return t(j())};return Object(r.useMemo)((function(){return{formData:e,dispatchUpdateOrAddElement:n,dispatchRemoveFormElement:i,dispatchClearForm:a,dispatchSubmitForm:d}}),[e])},I=Object(o.a)({reducer:{formBuilder:b.reducer}}),w=function(){return Object(c.b)()},E=c.c,k=n(59),S=n(40),D=n(41),M=(n(52),n(5)),A=n(1),C=function(){var e,t=O().formData,n=Object(r.useState)(!0),i=Object(M.a)(n,2),a=i[0],d=i[1];return Object(A.jsxs)("div",{style:{position:"absolute",width:"100vw",height:"80vh",left:"0px",top:"0px",background:"black",color:"white",overflow:"hidden",zIndex:"100"},children:[Object(A.jsx)("button",{onClick:function(e){d((function(e){return!e}))},children:"Toggle Transform"}),a&&Object(A.jsx)("pre",{style:{overflow:"scroll",height:"90%",width:"100%",margin:"15px"},children:JSON.stringify(t,null,2)}),!a&&Object(A.jsx)("pre",{style:{overflow:"scroll",height:"90%",width:"100%",margin:"15px"},children:JSON.stringify((e=t,function t(n){var r,i=[],a=Object(p.a)(n);try{for(a.s();!(r=a.n()).done;){var d,o=r.value,c={type:e[o].type,id:o};e[o].body&&(c.body=e[o].body),e[o].color&&(c.color=e[o].color),null!==(d=e[o])&&void 0!==d&&d.children&&(c.columns=e[o].children.map((function(e){return t(e)}))),i.push(c)}}catch(l){a.e(l)}finally{a.f()}return i}(e.children).flat()),null,2)})]})},R=n(60),F=function(e){var t=e.id,n=e.body,r=e.listId,i=e.handleRemoveElement,a=function(){i(t)},d=Object(R.a)((function(){return{type:"checkboxElement",item:{type:"checkbox",id:t,body:n,listId:r,onMoveElement:a},collect:function(e){return{isDragging:e.isDragging()}}}})),o=Object(M.a)(d,2),c=o[0].isDragging,l=o[1],s=c?.3:1;return Object(A.jsxs)("div",{ref:l,style:{margin:"10px",backgroundColor:"#f5cac3",border:"1px grey solid",padding:"10px",display:"flex",alignItems:"flex-end",gap:"10px",borderRadius:"5px",boxShadow:"3px 5px 10px rgba(0, 0, 0, 0.2)",position:"relative",transform:"translate(0, 0)",opacity:s},children:[Object(A.jsx)("button",{style:{position:"absolute",right:"10px",top:"10px",border:"1px grey solid",borderRadius:"5px"},onClick:a,children:"x"}),Object(A.jsx)("div",{dangerouslySetInnerHTML:{__html:n+" <small>id:"+t+"</small>"}}),Object(A.jsx)("input",{type:"checkbox"})]})},B=function(e){var t=e.id,n=e.body,i=e.columns,a=e.listId,d=e.handleRemoveElement,o=Object(r.useState)(3),c=Object(M.a)(o,2),l=(c[0],c[1],Object(r.useState)(i)),s=Object(M.a)(l,2),p=s[0],u=(s[1],function(){d(t)}),b=Object(R.a)((function(){return{type:"containerElement",item:{type:"container",id:t,body:n,listId:a,columns:p,onMoveElement:u},collect:function(e){return{isDragging:e.isDragging()}}}})),f=Object(M.a)(b,2),x=f[0].isDragging,h=f[1],m=x?.3:1;return Object(A.jsxs)("div",{ref:h,style:{backgroundColor:"#f7ede2",border:"1px grey solid",margin:"10px",padding:"10px",alignItems:"center",justifyContent:"space-between",borderRadius:"5px",boxShadow:"3px 5px 10px rgba(0, 0, 0, 0.2)",position:"relative",display:"inlineBlock",transform:"translate(0, 0)",opacity:m},children:[Object(A.jsx)("button",{style:{position:"absolute",right:"10px",top:"10px",border:"1px grey solid",borderRadius:"5px"},onClick:u,children:"x"}),Object(A.jsx)("div",{dangerouslySetInnerHTML:{__html:n+" <small>id:"+t+"</small>"}}),Object(A.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:p.map((function(e,n){return Object(A.jsx)(U,{id:t+n,rows:e,parentId:t,containerIndex:n},n)}))})]})},T=function(e){var t=e.id,n=e.body,r=e.listId,i=e.handleRemoveElement,a=function(){i(t)},d=Object(R.a)((function(){return{type:"shortAnswerElement",item:{type:"shortAnswer",id:t,body:n,listId:r,onMoveElement:a},collect:function(e){return{isDragging:e.isDragging()}}}})),o=Object(M.a)(d,2),c=o[0].isDragging,l=o[1],s=c?.3:1;return Object(A.jsxs)("div",{ref:l,style:{backgroundColor:"#84a59d",border:"1px grey solid",margin:"10px",padding:"10px",display:"flex",flexDirection:"column",gap:"10px",borderRadius:"5px",boxShadow:"3px 5px 10px rgba(0, 0, 0, 0.2)",position:"relative",transform:"translate(0, 0)",opacity:s},children:[Object(A.jsx)("button",{style:{position:"absolute",right:"10px",top:"10px",border:"1px grey solid",borderRadius:"5px"},onClick:a,children:"x"}),Object(A.jsx)("div",{dangerouslySetInnerHTML:{__html:n+" <small>id:"+t+"</small>"}}),Object(A.jsx)("input",{name:t,id:t})]})},_=function(e){var t=e.elementData,n=e.listId,r=e.handleRemoveElement,i=t.type,a=t.id,d=t.body,o=t.columns;return"checkbox"===i?Object(A.jsx)(F,{id:a,body:d,listId:n,handleRemoveElement:r}):"shortAnswer"===i?Object(A.jsx)(T,{id:a,body:d,listId:n,handleRemoveElement:r}):"container"===i?Object(A.jsx)(B,{id:a,body:d,columns:o,listId:n,handleRemoveElement:r}):Object(A.jsx)(A.Fragment,{})},J=n(61),L=["containerIcon","checkboxIcon","shortAnswerIcon","containerElement","checkboxElement","shortAnswerElement"],N=function(e){var t=e.prevId,n=e.index,r=e.parent,i=e.listId,a=e.handleAddElement,d=e.handleMoveElement,o=O().dispatchUpdateOrAddElement,c=Object(J.a)((function(){return{accept:L,canDrop:function(){return!0},drop:function(e,c){var s=Object(l.a)({id:e.id?e.id:Date.now().toString()+Math.floor(25*Math.random()+10).toString(36),type:e.type,body:e.body?e.body:"<div>New element!</div>"},"container"===e.type&&{columns:e.columns?e.columns:[[],[],[]]});i===e.listId?d(e.id,t):(e.onMoveElement&&e.onMoveElement(),a&&a({newElement:s,prevId:t,index:n,parent:r})),o({formElement:s,parentId:r,index:n,prevId:t})},collect:function(e){return{isOver:e.isOver(),canDrop:e.canDrop()}}}}),[]),s=Object(M.a)(c,2),p=s[0],u=p.canDrop,b=p.isOver,f=s[1],x=u&&b;return Object(A.jsx)("div",{ref:f,style:{backgroundColor:x?"#56d18b":"",width:"100%",height:x?"20px":"5px"}})},U=function(e){var t=e.id,n=e.containerIndex,i=e.rows,a=e.parentId,d=O().dispatchRemoveFormElement,o=Object(r.useState)(i),c=Object(M.a)(o,2),p=c[0],u=c[1],b=function(e){var t=e.newElement,n=e.prevId;e.parent;u(n?function(e){var r=e.findIndex((function(e){return e.id===n}));return[].concat(Object(s.a)(e.slice(0,r+1)),[t],Object(s.a)(e.slice(r+1)))}:function(e){return[t].concat(Object(s.a)(e))})},f=function(e){d({formElementId:e}),u((function(t){return t.filter((function(t){return t.id!==e}))}))},x=function(e,t){e!==t&&u((function(n){var r=n.findIndex((function(t){return t.id===e})),i=void 0===t?0:n.findIndex((function(e){return e.id===t}))+1;return r===i?n:t?i<r?[].concat(Object(s.a)(n.slice(0,i)),[n[r]],Object(s.a)(n.slice(i,r)),Object(s.a)(n.slice(r+1))):[].concat(Object(s.a)(n.slice(0,r)),Object(s.a)(n.slice(r+1,i)),[n[r]],Object(s.a)(n.slice(i))):[n[r]].concat(Object(s.a)(n.slice(0,r)),Object(s.a)(n.slice(r+1)))}))};return Object(A.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[Object(A.jsx)(N,{index:n,parent:a,listId:t,handleAddElement:b,handleMoveElement:x}),p.length?p.map((function(e,r){var i=e.id||Date.now().toString()+Math.floor(25*Math.random()+10).toString(36);return Object(A.jsxs)("div",{children:[Object(A.jsx)(_,{elementData:Object(l.a)(Object(l.a)({},e),{},{id:i}),listId:t,handleRemoveElement:f}),Object(A.jsx)(N,{prevId:i,index:n,parent:a,listId:t,handleAddElement:b,handleMoveElement:x})]},i)})):Object(A.jsxs)("div",{style:{backgroundColor:"#f7ede2",border:"1px white solid",margin:"10px",padding:"10px",alignItems:"center",justifyContent:"space-between",borderRadius:"5px",textAlign:"center"},children:["Add your element here",Object(A.jsx)(N,{handleAddElement:b,handleMoveElement:x,index:n,parent:a,listId:t})]})]})},z=function(e){var t=e.type,n=e.color,r=Object(R.a)((function(){return{type:t+"Icon",item:{type:t}}})),i=Object(M.a)(r,2)[1];return Object(A.jsx)("div",{ref:i,style:{margin:"10px",border:"1px grey solid",borderRadius:"5px",boxShadow:"3px 5px 10px rgba(0, 0, 0, 0.2)",padding:"10px",textAlign:"center",justifyContent:"space-between",backgroundColor:n,transform:"translate(0, 0)"},children:t})},H=n(35),q=function(e){var t=e.id,n=Object(r.useState)(H),i=Object(M.a)(n,2),a=i[0];i[1];return Object(A.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:"90%",overflow:"auto",backgroundColor:"#f0f4f5",padding:"10px",margin:"10px"},children:["FormBuilderCanvas",Object(A.jsx)(U,{id:Date.now().toString()+Math.floor(25*Math.random()+10).toString(36),rows:a,parentId:t})]})},V=["checkbox","shortAnswer","container"],W={checkbox:"#f5cac3",shortAnswer:"#84a59d",container:"#f7ede2"},G=function(e){var t=e.isDesktop;return Object(A.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:t?"10%":"90%",minWidth:"180px",backgroundColor:"#e9f0ec",padding:"10px",margin:"10px"},children:[Object(A.jsx)("div",{children:"FormBuilderSidebar"}),V.map((function(e){return Object(A.jsx)(z,{type:e,color:W[e]},e)}))]})},K=function(){var e=i.a.useState(!1),t=Object(M.a)(e,2),n=t[0],a=t[1],d=Object(r.useState)(window.matchMedia("(min-width: 768px)").matches),o=Object(M.a)(d,2),c=o[0],l=o[1];return Object(r.useEffect)((function(){window.matchMedia("(min-width: 768px)").addEventListener("change",(function(e){return l(e.matches)}))}),[]),Object(A.jsxs)(A.Fragment,{children:[n&&Object(A.jsx)(C,{}),Object(A.jsxs)("div",{style:{display:c?"flex":"inline",height:"calc(100vh - 80px)"},children:[Object(A.jsx)(G,{isDesktop:c}),Object(A.jsx)(q,{})]}),Object(A.jsx)("button",{style:{margin:"10px",border:"none",padding:"10px",float:"right",borderRadius:"10px",fontSize:c?"15px":"12px",zIndex:"1000"},onClick:function(e){e.preventDefault(),a((function(e){return!e}))},children:"View State"})]})};d.a.render(Object(A.jsx)(r.StrictMode,{children:Object(A.jsx)(c.a,{store:I,children:Object(A.jsx)(k.a,{backend:window.matchMedia("(pointer: coarse)").matches?D.a:S.a,children:Object(A.jsx)(K,{})})})}),document.getElementById("root"))}},[[54,1,2]]]);
//# sourceMappingURL=main.db05a98e.chunk.js.map